<!DOCTYPE html>
<html lang="id">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Dashboard Admin</title>
        <link rel="stylesheet" href="/css/dashboard-admin.css">
        <link rel="stylesheet" href="/css/global.css">
    </head>
    <body>
        <div class="container">
            <div class="left-bar">
                <img class="foto" src="/assets/foto/fotoanonym.png" title="Foto Profil">
                <div class="nama">raihan X arik</div>
                <ol>
                    <li class="side-dashboard">Dashboard</li>
                    <li class="side-akun">Account</li>
                    <hr>
                    <li class="side-games">Games</li>
                    <li class="side-topup">Topup</li>
                    <li class="side-riwayat">Riwayat</li>
                    <li class="side-laporan">Laporan</li>
                </ol>
                <button id="logoutBtn" class="logout-button" style="margin: 10px; padding: 8px 12px;">Logout</button>
            </div>

            <div class="main">
                <div id="dashboard" class="active">
                    <h2>Dashboard</h2>
                    <div class="container-dashboard-top">
                        <div class="totalPeng"><p class="styleP">Total Pengguna</p>10.000.000+<p class="styleP">Pengguna Bulan ini</p>100.000+</div>
                        <div class="order"><p class="styleP">Total Order</p>100.000+<p class="styleP">Order Bulan ini</p>14.000+</div>
                        <div class="waktuMain"><p class="styleP">Total Game Dimainkan</p>120.000x<p class="styleP">Bulan ini</p>2.000x</div>
                        <div class="kanan-top">
                            <div class="rating-top"><p class="styleP">Rating Bulan ini</p>200+</div>
                            <div class="report-top"><p class="styleP">Report Bulan ini</p>34</div>
                        </div>
                    </div>
                </div>
                <div id="akun">
                    <h2>Kelola Akun Admin</h2>
                    <table class="kotak-akun" cellspacing="10px">
                        <tr><th>Username</th><td class="username">: Rehan Aryanova narendra</td><td class="edit-username">EDIT</td></tr>
                        <tr><th>email</th><td class="email">: raihan@gmail.com</td><td class="edit-email">EDIT</td></tr>
                        <tr><th>Status</th><td>: Admin</td><td></td></tr>
                    </table>
                </div>
                <div id="games">
                    <h2>Daftar Game</h2>
                    <div class="game-container">
                        <div class="game-card">
                            <img src="/assets/gif/burung.gif" alt="Flappy Bird">
                            <p>Flappy bird</p>
                        </div>
                        <div class="game-card">
                            <img src="/assets/gif/burung.gif" alt="Tangkap Blok">
                            <p>Tangkap Blok</p>
                        </div>
                        <div class="game-card">
                            <img src="/assets/gif/burung.gif" alt="Mengetik Cepat">
                            <p>Mengetik Cepat</p>
                        </div>
                        <div class="game-card">
                            <img src="/assets/gif/burung.gif" alt="Mengetik Cepat">
                            <p>Mengetik Cepat</p>
                        </div>
                        <div class="game-card add-game-card">
                            <a class="tambah-game">+</a>
                            <p>Tambah Game</p>
                        </div>
                    </div>
                </div>
                <div id="topup">
                    <h2>Daftar Topup</h2>
                </div>
                <div id="riwayat">
                    <h2>Riwayat</h2>
                </div>
                <div id="laporan">
                    <h2>Laporan</h2>
                </div>
            </div>
        </div>
    <script>
    // fungsi pindah-pindah page
    const pages = document.querySelectorAll(".main > div");

    function showPage(id) {
        pages.forEach(page => page.style.display = "none");
        const target = document.getElementById(id);
        if (target) target.style.display = "block";
    }

    function clearSelection() {
        document.querySelector(".side-dashboard")?.classList.remove("terpilih");
        document.querySelector(".side-akun")?.classList.remove("terpilih");
        document.querySelector(".side-games")?.classList.remove("terpilih");
        document.querySelector(".side-topup")?.classList.remove("terpilih");
        document.querySelector(".side-riwayat")?.classList.remove("terpilih");
        document.querySelector(".side-laporan")?.classList.remove("terpilih");
    }

    const dashboardBtn = document.querySelector(".side-dashboard");
    const akunBtn = document.querySelector(".side-akun");
    const gamesBtn = document.querySelector(".side-games");
    const topupBtn = document.querySelector(".side-topup");
    const riwayatBtn = document.querySelector(".side-riwayat");
    const laporanBtn = document.querySelector(".side-laporan");

    dashboardBtn.onclick = function () {
        showPage("dashboard");
        clearSelection();
        dashboardBtn.classList.add("terpilih");
    };

    akunBtn.onclick = function () {
        showPage("akun");
        clearSelection();
        akunBtn.classList.add("terpilih");
    };

    gamesBtn.onclick = function () {
        showPage("games");
        clearSelection();
        gamesBtn.classList.add("terpilih");
    };

    topupBtn.onclick = function () {
        showPage("topup");
        clearSelection();
        topupBtn.classList.add("terpilih");
    };

    laporanBtn.onclick = function () {
        showPage("laporan");
        clearSelection();
        laporanBtn.classList.add("terpilih");
    };

    riwayatBtn.onclick = function () {
        showPage("riwayat");
        clearSelection();
        riwayatBtn.classList.add("terpilih");
    };
    window.onload = function () {
        showPage("dashboard");
        clearSelection();
        dashboardBtn.classList.add("terpilih");
    };
    const btnUsername = document.querySelector(".edit-username");
    const btnEmail = document.querySelector(".edit-email");

    btnUsername.onclick = function () {
        // TODO: Tambahkan fungsi untuk edit username
    };

    btnEmail.onclick = function () {
        // TODO: Tambahkan fungsi untuk edit email
    };

    </script>
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.9.1/firebase-app.js";
        import { getAuth, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.9.1/firebase-auth.js";

        const firebaseConfig = {
            apiKey: "AIzaSyBY5RLqhhp1IJJGdiKBQEOHTDoSPwvx8ZM",
            authDomain: "fussion-proyek-dpw.firebaseapp.com",
            projectId: "fussion-proyek-dpw",
            storageBucket: "fussion-proyek-dpw.appspot.com",
            messagingSenderId: "301956673407",
            appId: "1:301956673407:web:5d2bf8749996c113cf344a",
            measurementId: "G-CBS2216ZFG"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);

        onAuthStateChanged(auth, (user) => {
            if (!user) {
            window.location.href = "/login";
            }
        });

        const logoutBtn = document.getElementById("logoutBtn");
        logoutBtn.addEventListener("click", () => {
            signOut(auth)
            .then(() => {
                alert("Berhasil logout");
                window.location.href = "/login";
            })
            .catch((error) => {
                console.error("Gagal logout:", error);
                alert("Logout gagal");
            });
        });
    </script>
    </body>
</html>
